"use strict";(self.webpackChunkakuaakua=self.webpackChunkakuaakua||[]).push([[102],{31102:function(e,n,t){t.r(n);var i=t(74165),r=t(1413),a=t(15861),o=t(70885),c=t(47313),s=t(80042),l=t(31685),u=t(82937),m=t(62463),d=t(42669),f=t(79433),h=t(77449),p=t(73477),v=t(36482),x=t(62111),Z=t(47425),y=t(25350),w=t(26578),k=t(46417);document.body.style.background="transparent";n.default=function(){var e,n,t=(0,x.Z)(),j=((0,w.r7)(),c.useRef()),g=(location.search.match(/^\?url=(.*)$/)||[])[1],_=c.useState({remain_time:0,wait_time:0}),b=(0,o.Z)(_,2),C=b[0],z=b[1],E=c.useMemo((function(){return C.remain_time||C.wait_time||Date.now()}),[C]);Z.zK.iframeInit.link=g;var S=c.useState(Z.zK.iframeInit),D=(0,o.Z)(S,2),K=D[0],I=D[1],P=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t,a,o,c,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Ez(g).catch((function(e){return e}));case 2:n=e.sent,t=n.code,n.msg,a=n.info,0===t?(c=(o=a||{}).remain_time,s=o.deadline,c-Date.now()>1&&(C.remain_time=c),s-Date.now()>1&&(C.wait_time=s),C.remain_time||C.wait_time||I(Z.zK.iframeSessionEnd),z((0,r.Z)({},C))):I(Z.zK.iframeSessionEnd);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=(0,s.Z)({targetDate:E,interval:1e3,onEnd:function(){}}),T=(0,o.Z)(A,1)[0];return c.useEffect((function(){if(C.remain_time&&C.remain_time-Date.now()<1&&(C.remain_time=0,z((0,r.Z)({},C)),I((0,r.Z)((0,r.Z)({},Z.zK.iframeSessionEnd),{},{jump2pay:Z.zK.iframeInit.jump2pay}))),T<3){var e,n=null===(e=j.current)||void 0===e?void 0:e.querySelector("#if-content");try{"none"===n.style.display&&(n.style.display="block",(0,Z.zZ)(location.href))}catch(t){}}}),[T]),c.useEffect((function(){var e;P(),(0,Z.ye)(null===(e=j.current)||void 0===e?void 0:e.querySelector("#if-content"),P)}),[]),(0,k.jsxs)("div",{ref:j,children:[(0,k.jsx)(v.Z,{style:{background:"transparent"},children:(0,k.jsx)(l.Z,{onClickAway:function(e){console.log("onClickAway----",C),C.remain_time>Date.now()&&K.closeIframe(g)},children:(0,k.jsxs)(u.ZP,{container:!0,spacing:3,children:[(0,k.jsx)(u.ZP,{item:!0,xs:12,children:(0,k.jsxs)(m.Z,{direction:"column",justifyContent:"center",gap:3,alignItems:"center",sx:{mb:{xs:-.5,sm:.5}},children:[(0,k.jsx)(d.Z,{variant:"h2",color:t.palette.common.white,children:(null===(e=K.TitleCb)||void 0===e?void 0:e.call(K,T))||K.title}),(0,k.jsx)(d.Z,{variant:"body1",color:t.palette.text.secondary,children:K.subTitle})]})}),(0,k.jsx)(u.ZP,{item:!0,xs:12,children:(null===(n=K.ActionCb)||void 0===n?void 0:n.call(K,T))||K.action})]})})}),(0,k.jsxs)(f.Z,{variant:"filled",severity:"warning",sx:{position:"fixed",bottom:10,right:10,width:"300px"},onClick:function(e){e.stopPropagation()},children:["There are ",(0,k.jsx)("strong",{children:(0,Z.zX)(T)})," left until the end of this usage",(0,k.jsx)(h.Z,{underline:"hover",children:(0,k.jsx)(p.Z,{variant:"text",color:"success",onClick:K.jump2pay,children:"Click here to renew"})})]})]})}}}]);