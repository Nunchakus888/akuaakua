"use strict";(self.webpackChunkakuaakua=self.webpackChunkakuaakua||[]).push([[102],{31102:function(e,n,i){i.r(n);var t=i(74165),a=i(1413),r=i(15861),o=i(29439),s=i(47313),c=i(80042),l=i(31685),u=i(82937),m=i(62463),d=i(42669),f=i(79433),h=i(77449),p=i(73477),Z=i(36482),x=i(62111),v=i(47425),j=i(25350),w=i(26578),k=i(46417);document.body.style.background="transparent";n.default=function(){var e,n,i=(0,x.Z)(),y=((0,w.r7)(),s.useRef()),g=(location.search.match(/^\?url=(.*)$/)||[])[1],_=s.useState({remain_time:0,wait_time:0}),z=(0,o.Z)(_,2),b=z[0],C=z[1],K=s.useMemo((function(){return b.remain_time||b.wait_time||Date.now()}),[b]);v.zK.iframeSessionEnd.link=g,v.zK.iframeInit.link=g;var E=s.useState(v.zK.iframeInit),S=(0,o.Z)(E,2),I=S[0],D=S[1],P=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var n,i,r,o,s,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Ez(g).catch((function(e){return e}));case 2:n=e.sent,i=n.code,n.msg,r=n.info,0===i?(s=(o=r||{}).remain_time,c=o.deadline,s-Date.now()>1&&(b.remain_time=s),c-Date.now()>1&&(b.wait_time=c),b.remain_time?D(v.zK.iframeInit):b.wait_time?D((0,a.Z)((0,a.Z)({},v.zK.iframeSessionEnd),{},{jump2pay:v.zK.iframeInit.jump2pay})):D((0,a.Z)((0,a.Z)({},v.zK.iframeSessionEnd),{},{jump2pay:v.H4})),C((0,a.Z)({},b))):D(v.zK.iframeSessionEnd);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=(0,c.Z)({targetDate:K,interval:1e3}),T=(0,o.Z)(A,1)[0];return s.useEffect((function(){b.remain_time&&b.remain_time-Date.now()<1&&(b.remain_time=0,C((0,a.Z)({},b)),D((0,a.Z)((0,a.Z)({},v.zK.iframeSessionEnd),{},{jump2pay:v.zK.iframeInit.jump2pay})))}),[T]),s.useEffect((function(){var e;P(),(0,v.ye)(null===(e=y.current)||void 0===e?void 0:e.querySelector("#if-content"),P)}),[]),(0,k.jsxs)("div",{ref:y,children:[(0,k.jsx)(Z.Z,{style:{background:"transparent"},children:(0,k.jsx)(l.Z,{onClickAway:function(e){console.log("onClickAway----",b),b.remain_time>Date.now()&&I.closeIframe(g)},children:(0,k.jsxs)(u.ZP,{container:!0,spacing:3,children:[(0,k.jsx)(u.ZP,{item:!0,xs:12,children:(0,k.jsxs)(m.Z,{direction:"column",justifyContent:"center",gap:3,alignItems:"center",sx:{mb:{xs:-.5,sm:.5}},children:[(0,k.jsx)(d.Z,{variant:"h2",color:i.palette.common.white,children:(null===(e=I.TitleCb)||void 0===e?void 0:e.call(I,T))||I.title}),(0,k.jsx)(d.Z,{variant:"body1",color:i.palette.text.secondary,children:I.subTitle})]})}),(0,k.jsx)(u.ZP,{item:!0,xs:12,children:(null===(n=I.ActionCb)||void 0===n?void 0:n.call(I,T))||I.action})]})})}),(0,k.jsxs)(f.Z,{variant:"filled",severity:"warning",sx:{position:"fixed",bottom:10,right:10,width:"300px"},onClick:function(e){e.stopPropagation()},children:["There are ",(0,k.jsx)("strong",{children:(0,v.zX)(T)})," left until the end of this usage",(0,k.jsx)(h.Z,{underline:"hover",children:(0,k.jsx)(p.Z,{variant:"text",color:"success",onClick:I.jump2pay,children:"Click here to renew"})})]})]})}}}]);