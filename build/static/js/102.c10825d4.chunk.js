"use strict";(self.webpackChunkakuaakua=self.webpackChunkakuaakua||[]).push([[102],{31102:function(e,n,t){t.r(n);var i=t(74165),r=t(1413),a=t(15861),o=t(70885),c=t(47313),s=t(80042),l=t(31685),u=t(82937),d=t(62463),m=t(42669),f=t(79433),h=t(77449),p=t(73477),Z=t(36482),v=t(62111),x=t(47425),y=t(25350),j=t(26578),w=t(46417);document.body.style.background="transparent";n.default=function(){var e,n,t=(0,v.Z)(),k=((0,j.r7)(),c.useRef()),g=(location.search.match(/^\?url=(.*)$/)||[])[1],b=c.useState({remain_time:0,wait_time:0}),C=(0,o.Z)(b,2),_=C[0],z=C[1],D=c.useMemo((function(){return _.remain_time||_.wait_time||Date.now()}),[_]);x.zK.iframeInit.url=g;var I=c.useState(x.zK.iframeInit),K=(0,o.Z)(I,2),S=K[0],E=K[1],P=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t,a,o,c,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Ez(g).catch((function(e){return e}));case 2:n=e.sent,t=n.code,n.msg,a=n.info,0===t?(c=(o=a||{}).remain_time,s=o.deadline,c-Date.now()>1&&(_.remain_time=c),s-Date.now()>1&&(_.wait_time=s),z((0,r.Z)({},_))):E((0,r.Z)((0,r.Z)({},x.zK.iframeSessionEnd),{},{jump2pay:x.zK.iframeInit.jump2pay}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=(0,s.Z)({targetDate:D,interval:1e3}),T=(0,o.Z)(A,1)[0];return c.useEffect((function(){if(_.remain_time&&_.remain_time-Date.now()<1&&E((0,r.Z)((0,r.Z)({},x.zK.iframeSessionEnd),{},{jump2pay:x.zK.iframeInit.jump2pay})),T<3){var e,n=null===(e=k.current)||void 0===e?void 0:e.querySelector("#if-content");try{"none"===n.style.display&&(n.style.display="block",(0,x.zZ)(location.href))}catch(t){}}}),[T]),c.useEffect((function(){var e;P(),(0,x.ye)(null===(e=k.current)||void 0===e?void 0:e.querySelector("#if-content"),P)}),[]),(0,w.jsxs)("div",{ref:k,children:[(0,w.jsx)(Z.Z,{style:{background:"transparent"},children:(0,w.jsx)(l.Z,{onClickAway:function(e){console.log("onClickAway----",_),_.remain_time>Date.now()&&S.closeIframe(g)},children:(0,w.jsxs)(u.ZP,{container:!0,spacing:3,children:[(0,w.jsx)(u.ZP,{item:!0,xs:12,children:(0,w.jsxs)(d.Z,{direction:"column",justifyContent:"center",gap:3,alignItems:"center",sx:{mb:{xs:-.5,sm:.5}},children:[(0,w.jsx)(m.Z,{variant:"h2",color:t.palette.common.white,children:(null===(e=S.TitleCb)||void 0===e?void 0:e.call(S,T))||S.title}),(0,w.jsx)(m.Z,{variant:"body1",color:t.palette.text.secondary,children:S.subTitle})]})}),(0,w.jsx)(u.ZP,{item:!0,xs:12,children:(null===(n=S.ActionCb)||void 0===n?void 0:n.call(S,T))||S.action})]})})}),(0,w.jsxs)(f.Z,{variant:"filled",severity:"warning",sx:{position:"fixed",bottom:10,right:10,width:"300px"},onClick:function(e){e.stopPropagation()},children:["There are ",(0,w.jsx)("strong",{children:(0,x.zX)(T)})," left until the end of this usage",(0,w.jsx)(h.Z,{underline:"hover",children:(0,w.jsx)(p.Z,{variant:"text",color:"success",onClick:S.jump2pay,children:"Click here to renew"})})]})]})}}}]);