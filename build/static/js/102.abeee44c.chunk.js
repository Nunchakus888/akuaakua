"use strict";(self.webpackChunkakuaakua=self.webpackChunkakuaakua||[]).push([[102],{31102:function(e,n,i){i.r(n);var t=i(74165),r=i(1413),a=i(15861),o=i(70885),l=i(47313),c=i(94128),s=i(47970),u=i(31685),d=i(82937),m=i(62463),f=i(42669),p=i(79433),h=i(77449),v=i(73477),Z=i(36482),x=i(62111),y=i(47425),j=i(25350),k=i(26578),g=i(46417);document.body.style.background="transparent";n.default=function(){var e,n,i=(0,x.Z)(),b=((0,k.r7)(),l.useRef()),w=(location.search.match(/^\?url=(.*)$/)||[])[1];y.zK.iframeInit.url=w;var z=l.useState(y.zK.iframeInit),C=(0,o.Z)(z,2),I=C[0],K=C[1],E=(0,c.Z)((0,a.Z)((0,t.Z)().mark((function e(){var n,i,a,o,l,c,s,u,d,m;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Ez(w).catch((function(e){return e}));case 2:if(n=e.sent,i=n.code,n.msg,a=n.info,0!==i){e.next=14;break}if(l=(o=a||{}).remain_time,c=o.deadline,s=void 0===c?12e4:c,l<1){P(),d=null===(u=b.current)||void 0===u?void 0:u.querySelector("#if-content");try{"none"===d.style.display&&(d.style.display="block",(0,y.zZ)(location.href))}catch(t){}K((0,r.Z)((0,r.Z)({},y.zK.iframeSessionEnd),{},{jump2pay:y.zK.iframeInit.jump2pay}))}return m=0,s&&(s>Date.now()&&(m=(s-Date.now())/1e3),K((0,r.Z)((0,r.Z)({},y.zK.iframeSessionEnd),{},{jump2pay:y.zK.iframeInit.jump2pay}))),e.abrupt("return",{remain_time:l,wait_time:m});case 14:P(),K((0,r.Z)((0,r.Z)({},y.zK.iframeSessionEnd),{},{jump2pay:y.zK.iframeInit.jump2pay}));case 16:case"end":return e.stop()}}),e)}))),{manual:!0,pollingInterval:5e3,pollingErrorRetryCount:3}),S=E.data,_=E.run,P=E.cancel,T=(E.loading,(0,s.Z)({leftTime:1e3*((null===S||void 0===S?void 0:S.remain_time)||(null===S||void 0===S?void 0:S.wait_time)||0)})),A=(0,o.Z)(T,1)[0];return l.useEffect((function(){var e;_(),(0,y.ye)(null===(e=b.current)||void 0===e?void 0:e.querySelector("#if-content"),_)}),[]),(0,g.jsxs)("div",{ref:b,children:[(0,g.jsx)(Z.Z,{style:{background:"transparent"},children:(0,g.jsx)(u.Z,{onClickAway:function(e){console.log("onClickAway----",S),null!==S&&void 0!==S&&S.remain_time&&I.closeIframe(w)},children:(0,g.jsxs)(d.ZP,{container:!0,spacing:3,children:[(0,g.jsx)(d.ZP,{item:!0,xs:12,children:(0,g.jsxs)(m.Z,{direction:"column",justifyContent:"center",gap:3,alignItems:"center",sx:{mb:{xs:-.5,sm:.5}},children:[(0,g.jsx)(f.Z,{variant:"h2",color:i.palette.common.white,children:(null===(e=I.TitleCb)||void 0===e?void 0:e.call(I,A))||I.title}),(0,g.jsx)(f.Z,{variant:"body1",color:i.palette.text.secondary,children:I.subTitle})]})}),(0,g.jsx)(d.ZP,{item:!0,xs:12,children:(null===(n=I.ActionCb)||void 0===n?void 0:n.call(I,A))||I.action})]})})}),(0,g.jsxs)(p.Z,{variant:"filled",severity:"warning",sx:{position:"fixed",bottom:10,right:10,width:"300px"},onClick:function(e){e.stopPropagation()},children:["There are ",(0,g.jsx)("strong",{children:(0,y.zX)(A)})," left until the end of this usage",(0,g.jsx)(h.Z,{underline:"hover",children:(0,g.jsx)(v.Z,{variant:"text",color:"success",onClick:I.jump2pay,children:"Click here to renew"})})]})]})}}}]);